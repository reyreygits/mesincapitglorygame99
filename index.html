<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Mesin Capit Hadiah</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background-color: #f2f2f2; }
    h2 { color: #333; }
    .section { background: white; padding: 20px; margin-bottom: 30px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    input, button { padding: 10px; margin: 5px 0; width: 100%; box-sizing: border-box; }
    .success { color: green; }
    .error { color: red; }
    .voucher { font-size: 20px; font-weight: bold; color: blue; }
  </style>
</head>
<body>

  <div class="section">
    <h2>üëë Admin - Buat Mesin Capit</h2>
    <label>Nama Hadiah/Voucher:</label>
    <input type="text" id="prizeName" placeholder="Contoh: Voucher Diskon 50%">
    
    <label>Jumlah Hadiah:</label>
    <input type="number" id="prizeAmount" placeholder="Contoh: 10">
    
    <button onclick="createMachine()">Buat Kode Mesin Capit</button>
    <div id="codeOutput" class="success"></div>
  </div>

  <div class="section">
    <h2>üéÅ Mesin Capit - Klaim Hadiah</h2>
    <label>Masukkan Kode Mesin Capit:</label>
    <input type="text" id="inputCode" placeholder="Contoh: ABC123">
    
    <button onclick="claimPrize()">Capit Hadiah!</button>
    <div id="claimResult"></div>
  </div>

  <script>
    // Simpan data mesin capit di memori lokal (sementara)
    const machines = {};

    function generateCode(length = 6) {
      const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      let code = "";
      for (let i = 0; i < length; i++) {
        code += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return code;
    }

    function createMachine() {
      const name = document.getElementById("prizeName").value.trim();
      const amount = parseInt(document.getElementById("prizeAmount").value);

      if (!name || isNaN(amount) || amount < 1) {
        alert("Isi data dengan benar!");
        return;
      }

      const code = generateCode();
      machines[code] = { name, remaining: amount };

      document.getElementById("codeOutput").innerHTML = `
        ‚úÖ Mesin Capit dibuat!<br>
        Kode: <strong>${code}</strong><br>
        Hadiah: <strong>${name}</strong><br>
        Jumlah: <strong>${amount}</strong>
      `;

      // Reset input
      document.getElementById("prizeName").value = "";
      document.getElementById("prizeAmount").value = "";
    }

    function claimPrize() {
      const code = document.getElementById("inputCode").value.trim().toUpperCase();
      const resultDiv = document.getElementById("claimResult");

      if (!machines[code]) {
        resultDiv.innerHTML = `<span class="error">‚ùå Kode tidak ditemukan atau salah!</span>`;
        return;
      }

      const machine = machines[code];
      if (machine.remaining < 1) {
        resultDiv.innerHTML = `<span class="error">üò¢ Maaf, semua hadiah sudah habis!</span>`;
        return;
      }

      // Kurangi jumlah hadiah
      machine.remaining--;

      resultDiv.innerHTML = `
        <span class="success">üéâ Selamat! Kamu mendapat:</span><br>
        <div class="voucher">${machine.name}</div>
        <small>Sisa hadiah: ${machine.remaining}</small>
      `;

      document.getElementById("inputCode").value = "";
    }
  </script>

</body>
</html>
